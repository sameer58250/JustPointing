!function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=38)}([function(e,t){e.exports=require("react")},function(e,t){e.exports=require("@babel/runtime/helpers/slicedToArray")},function(e,t){e.exports=require("react-router-dom")},function(e,t){e.exports=require("react-redux")},function(e,t){e.exports=require("@babel/runtime/helpers/defineProperty")},function(e,t){e.exports=require("axios")},function(e,t){e.exports=require("react-cookie")},function(e,t){e.exports=require("@material-ui/core/TextField")},function(e,t){e.exports=require("@material-ui/icons/Cancel")},function(e,t){e.exports=require("react-modal")},function(e,t){e.exports=require("redux")},function(e,t){e.exports=require("@material-ui/icons/Check")},function(e,t){e.exports=require("@babel/runtime/helpers/extends")},function(e,t){e.exports=require("@material-ui/lab/Autocomplete")},function(e,t){e.exports=require("@material-ui/icons/Delete")},function(e,t){e.exports=require("@material-ui/core/MenuItem")},function(e,t){e.exports=require("@babel/runtime/regenerator")},function(e,t){e.exports=require("express")},function(e,t){e.exports=require("babel-polyfill")},function(e,t){e.exports=require("@babel/runtime/helpers/asyncToGenerator")},function(e,t){e.exports=require("react-dom/server")},function(e,t){e.exports=require("@babel/runtime/helpers/classCallCheck")},function(e,t){e.exports=require("@material-ui/core/Menu")},function(e,t){e.exports=require("@material-ui/core/IconButton")},function(e,t){e.exports=require("@material-ui/icons/MoreVert")},function(e,t){e.exports=require("@material-ui/icons/ChevronLeft")},function(e,t){e.exports=require("@material-ui/icons/ChevronRight")},function(e,t){e.exports=require("@material-ui/icons/Settings")},function(e,t){e.exports=require("@material-ui/core/styles")},function(e,t){e.exports=require("@material-ui/core/Card")},function(e,t){e.exports=require("@material-ui/core/CardContent")},function(e,t){e.exports=require("@material-ui/core/Typography")},function(e,t){e.exports=require("@material-ui/icons/Edit")},function(e,t){e.exports=require("@material-ui/core/CardActions")},function(e,t){e.exports=require("@material-ui/icons/Add")},function(e,t){e.exports=require("@material-ui/icons/PersonAdd")},function(e,t){e.exports=require("@material-ui/icons/ExpandMore")},function(e,t){e.exports=require("@material-ui/icons/ExpandLess")},function(e,t,n){n(18),e.exports=n(41)},function(e,t){e.exports=require("@material-ui/core/Button")},function(e,t){e.exports=require("@material-ui/core/CircularProgress")},function(e,t,n){"use strict";n.r(t);var r=n(16),a=n.n(r),o=n(19),i=n.n(o),l=(n(18),n(17)),c=n(0),s=n.n(c),u=n(20),d=n.n(u),m=n(10),p=n(3),f=n(4),E=n.n(f);function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){E()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var S={sessionId:null,sessionError:"",isAdmin:!1,isObserver:!1,isUserLoggedIn:!1,userDetails:{},openLoginPopup:!1};function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){E()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var O={PointingWebSocket:"",ValidStoryPoints:[],Users:[],TeamId:"",IsShowEnabled:!1,StoryDescription:"",PreStoryDescription:"",WebSocketId:"",error:""};function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(Object(n),!0).forEach((function(t){E()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var I={ShowVoteSetting:"all",ResetVoteSetting:"onlyAdmin",EditSizeListSetting:"all",ControlUserSetting:"onlyAdmin"};function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach((function(t){E()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var C={retroBoards:[],retroData:[],selectedBoard:{},selectedBoardId:"",selectedBoardUsers:[],selectedRetroPoint:{},isRetroPointModalOpen:!1,isSettingsOpen:!1,retroBoardTemplates:[]},N=Object(m.combineReducers)({SessionReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CREATE_ACTION_SUCCESS":return b(b({},e),{},{sessionId:t.payload,sessionError:""});case"CREATE_ACTION_FAILURE":return b(b({},e),{},{sessionError:t.payload,sessionId:null});case"SESSION_STARTED":return b(b({},e),{},{isAdmin:!0});case"SET_ROLE":return b(b({},e),{},{isObserver:t.payload});case"LOGIN_USER":return b(b({},e),{},{isUserLoggedIn:!0,userDetails:t.payload,openLoginPopup:!1});case"LOGOUT_USER":return b(b({},e),{},{isUserLoggedIn:!1,userDetails:{}});case"OPEN_LOGIN_POPUP":return b(b({},e),{},{openLoginPopup:t.payload});default:return e}},WebSocketReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ASSIGN_WEB_SOCKET":return y(y({},e),{},{PointingWebSocket:t.payload});case"WEB_SOCKET_MESSAGE_RECEIVED":return y(y({},e),{},{PreStoryDescription:e.StoryDescription,ValidStoryPoints:t.payload.ValidStoryPoints,Users:t.payload.Users,TeamId:t.payload.TeamId,IsShowEnabled:t.payload.IsShowEnabled,StoryDescription:t.payload.StoryDescription,error:""});case"WEB_SOCKET_ID_RECEIVED":return y(y({},e),{},{WebSocketId:t.payload,error:""});case"UPDATE_USER_STORY_POINT":return y(y({},e),{},{Users:t.payload,error:""});case"SHOW_VOTES":return y(y({},e),{},{IsShowEnabled:!0,error:""});case"CLEAR_VOTES":return y(y({},e),{},{Users:t.payload,IsShowEnabled:!1,error:""});case"SET_ITEM_DESCRIPTION":return y(y({},e),{},{StoryDescription:t.payload,error:""});case"REMOVE_USER":return y(y({},e),{},{Users:t.payload,error:""});case"FAILURE":return y(y({},e),{},{error:t.payload});case"UPDATE_VALID_STORY_POINTS":return y(y({},e),{},{ValidStoryPoints:t.payload});default:return e}},AdminSettingReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_ALL_SETTINGS":return h(h({},e),{},{ShowVoteSetting:t.payload.ShowVoteSetting,ResetVoteSetting:t.payload.ResetVoteSetting,EditSizeListSetting:t.payload.EditSizeListSetting,ControlUserSetting:t.payload.ControlUserSetting});case"UPDATE_SHOW_VOTE_SETTING":return h(h({},e),{},{ShowVoteSetting:t.payload});case"UPDATE_RESET_VOTE_SETTING":return h(h({},e),{},{ResetVoteSetting:t.payload});case"UPDATE_EDIT_SIZE_LIST_SETTING":return h(h({},e),{},{EditSizeListSetting:t.payload});case"UPDATE_CONTROL_USER_SETTING":return h(h({},e),{},{ControlUserSetting:t.payload});default:return e}},RetroReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_RETRO_DATA":return T(T({},e),{},{retroData:t.payload});case"GET_RETRO_BOARDS":return T(T({},e),{},{retroBoards:t.payload});case"SELECT_BOARD":return T(T({},e),{},{selectedBoard:t.payload,isRetroPointModalOpen:!1});case"LOAD_BOARD_ID_FROM_URL":return T(T({},e),{},{selectedBoardId:t.payload});case"UPDATE_BOARD_USERS":return T(T({},e),{},{selectedBoardUsers:t.payload});case"SELECT_RETRO_POINT":return T(T({},e),{},{selectedRetroPoint:t.payload});case"OPEN_CLOSE_RETRO_POINT_MODAL":return T(T({},e),{},{isRetroPointModalOpen:t.payload});case"OPEN_CLOSE_RETRO_SETTINGS":return T(T({},e),{},{isSettingsOpen:t.payload});case"GET_RETRO_BOARD_TEMPLATE":return T(T({},e),{},{retroBoardTemplates:t.payload});default:return e}}}),D=n(2),B=n(1),A=n.n(B),_=function(e){return{type:"CREATE_ACTION_SUCCESS",payload:e}},k=function(e){return{type:"CREATE_ACTION_FAILURE",payload:e}},w=function(e){return{type:"LOGIN_USER",payload:e}},U=function(e){return{type:"OPEN_LOGIN_POPUP",payload:e}},j=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_BASE_API_URL:"https://justpointingapi.azurewebsites.net",REACT_APP_IS_PROD:"true",REACT_APP_RETRO_SOCKET_URL:"wss://justpointingapi.azurewebsites.net/retroSocket",REACT_APP_WEB_SOCKET_URL:"wss://justpointingapi.azurewebsites.net/point"}),L=n(5),x=n.n(L),V=function(e){var t=W()+"/Home/StartSession"+(e?"/"+e:"");return x.a.get(t)};function W(){return j.REACT_APP_BASE_API_URL}var z=function(e){return s.a.createElement("div",{className:"error"},e.errorText?s.a.createElement("p",null,e.errorText):"")};var q=Object(p.connect)((function(e){return{error:e.SessionReducer.sessionError,webSocket:e.WebSocketReducer.PointingWebSocket}}),(function(e){return{success:function(t){return e(_(t))},failure:function(t){return e(k(t))},sessionStarted:function(){return e({type:"SESSION_STARTED"})}}}))((function(e){var t=Object(D.useHistory)();Object(c.useEffect)((function(){e.webSocket&&e.webSocket.close(),e.failure("")}));var n=Object(c.useState)(""),r=A()(n,2),a=r[0],o=r[1];return s.a.createElement("div",null,s.a.createElement("div",{className:"app-title"},s.a.createElement("p",null,"Collaborate to size your items and make agile development easy")),s.a.createElement("div",{className:"home"},s.a.createElement("button",{onClick:function(){V().then((function(n){t.replace("/"+n.data),e.success(n.data),e.sessionStarted()})).catch((function(t){e.failure("Failed to create session. Please try again.")}))},className:"primary-btn"},"Start Session"),s.a.createElement("label",null,"Session ID:"),s.a.createElement("input",{type:"text",id:"session-id-input",onChange:function(e){o(e.currentTarget.value)}}),s.a.createElement("button",{onClick:function(){var n=document.getElementById("session-id-input").value;V(n).then((function(n){t.replace("/"+n.data),e.success(n.data)})).catch((function(t){e.failure("Session is not found. Please try with different session Id.")}))},disabled:!a}," Join Session"),s.a.createElement(z,{errorText:e.error})))})),M=n(21),F=n.n(M),G=function e(){var t=this;F()(this,e),E()(this,"pointingWebSocket",void 0),E()(this,"startWebSocket",(function(e,n,r,a,o){var i=j.REACT_APP_WEB_SOCKET_URL+"?teamId="+e+"&name="+n+"&role="+r;t.pointingWebSocket?t.pointingWebSocket.onmessage=a:(t.pointingWebSocket=new WebSocket(i),t.pointingWebSocket.onopen=function(e){console.log(t.pointingWebSocket)},t.pointingWebSocket.onmessage=a,t.pointingWebSocket.onclose=o)}))},H=function(e){return{type:"FAILURE",payload:e}},K=function(e){return e.users&&e.users.length>0?s.a.createElement("div",{className:"user-list app-table"},s.a.createElement("div",{className:"app-table-header"},s.a.createElement("div",{className:"app-table-cell first-head-cell"},"Name"),s.a.createElement("div",{className:"app-table-cell"},"HasVoted"),s.a.createElement("div",{className:"app-table-cell"},s.a.createElement("button",{className:"show-button",onClick:e.showVotes,disabled:"OnlyAdmin"==e.showVoteSetting&&!e.isAdmin},"Show votes"),s.a.createElement("button",{className:"clear-button",onClick:e.clearVotes,disabled:"OnlyAdmin"==e.resetVoteSetting&&!e.isAdmin},"Reset votes"))),e.users.map((function(t){return s.a.createElement("div",{key:t.SocketId,className:"app-table-row"},s.a.createElement("div",{className:"app-table-cell remove-user-div"},s.a.createElement("button",{className:"remove-user",onClick:function(){return e.removeUser(t.SocketId)},disabled:"OnlyAdmin"==e.controlUserSetting&&!e.isAdmin},"X"),t.Name),s.a.createElement("div",{className:"app-table-cell"},s.a.createElement("input",{type:"checkbox",checked:!!t.HasPointed,readOnly:!0})),s.a.createElement("div",{className:"app-table-cell"},e.isShowEnabled?t.StoryPoint:""))}))):s.a.createElement("div",{className:"no-users"}," Invite your team members to join.")},J=function(e,t,n){var r=Y(e,t,n);return-1!==r&&e.splice(r,1),e},Y=function(e,t,n){for(var r=0;r<e.length;){if(e[r]&&e[r].hasOwnProperty(t)&&n&&e[r][t]===n)return r;r++}return-1};var Z=Object(p.connect)((function(e){return{sessionId:e.SessionReducer.sessionId,userList:e.WebSocketReducer.Users,storyPoints:e.WebSocketReducer.ValidStoryPoints,webSocketId:e.WebSocketReducer.WebSocketId,isAdmin:e.SessionReducer.isAdmin,isShowEnabled:e.WebSocketReducer.IsShowEnabled,resetVoteSetting:e.AdminSettingReducer.ResetVoteSetting,showVoteSetting:e.AdminSettingReducer.ShowVoteSetting,controlUserSetting:e.AdminSettingReducer.ControlUserSetting,isObserver:e.SessionReducer.isObserver}}),(function(e){return{vote:function(t){return e({type:"UPDATE_USER_STORY_POINT",payload:t})},showVotes:function(){return e({type:"SHOW_VOTES"})},clearVotes:function(t){return e({type:"CLEAR_VOTES",payload:t})},removeUser:function(t){return e(function(e){return{type:"REMOVE_USER",payload:e}}(t))},failure:function(t){return e(H(t))}}}))((function(e){var t=function(t){var n,r,a,o=t.target.innerText;(n=e.webSocketId,r=o,a=W()+"/Pointing/CastVote?socketId="+n+"&vote="+r,x.a.post(a)).then((function(t){e.userList.map((function(t){return t.SocketId==e.webSocketId&&(t.HasPointed=!0,e.isShowEnabled&&(t.StoryPoint=o)),t})),e.vote(e.userList)})).catch((function(e){console.log(e)}))};return s.a.createElement("div",{className:"item-size-list"},s.a.createElement("div",{hidden:e.isObserver},e.storyPoints.map((function(n,r){return s.a.createElement("button",{onClick:t,key:r,disabled:e.isShowEnabled},n)}))),s.a.createElement(K,{users:e.userList,isShowEnabled:e.isShowEnabled,showVotes:function(){var t,n;(t=e.sessionId,n=W()+"/Pointing/ShowVotes?teamId="+t,x.a.post(n)).then((function(t){e.showVotes()})).catch((function(e){console.log(e)}))},clearVotes:function(){var t,n;(t=e.sessionId,n=W()+"/Pointing/ClearVotes?teamId="+t,x.a.post(n)).then((function(t){e.userList.map((function(e){return e.HasPointed=!1,e.StoryPoint="",e})),e.clearVotes(e.userList)})).catch((function(e){console.log(e)}))},removeUser:function(t){var n=Y(e.userList,"SocketId",t);-1==n||e.userList[n].IsAdmin?e.failure("Cannot remove an admin."):function(e){var t=W()+"/User/RemoveUser?socketId="+e;return x.a.post(t)}(t).then((function(t){e.userList.splice(n,1),e.removeUser(e.userList)})).catch((function(e){console.log(e)}))},resetVoteSetting:e.resetVoteSetting,showVoteSetting:e.showVoteSetting,controlUserSetting:e.controlUserSetting,isAdmin:e.isAdmin}))}));var X=Object(p.connect)((function(e){return{storyPoints:e.WebSocketReducer.ValidStoryPoints,sessionId:e.SessionReducer.sessionId,editSizeListSetting:e.AdminSettingReducer.EditSizeListSetting,isAdmin:e.SessionReducer.isAdmin}}),(function(e){return{updateValideSizeList:function(t){return e(function(e){return{type:"UPDATE_VALID_STORY_POINTS",payload:e}}(t))},failure:function(t){return e(H(t))}}}))((function(e){Object(c.useEffect)((function(){var t=document.querySelectorAll("#valid-item-size input"),n=document.querySelectorAll("#valid-item-size button");t.forEach((function(t){t.disabled="OnlyAdmin"==e.editSizeListSetting&&!e.isAdmin})),n.forEach((function(t){t.disabled="OnlyAdmin"==e.editSizeListSetting&&!e.isAdmin}))}),[e.editSizeListSetting]);function t(){var t,n,r,a=e.storyPoints.slice();(t=e.sessionId,n=a,r=W()+"/Pointing/UpdateValidStoryPoints?teamId="+t,x.a.post(r,n)).then((function(t){e.updateValideSizeList(a)})).catch((function(t){e.failure("Failed to update size list.")}))}return s.a.createElement("div",{className:"valid-item-size",id:"valid-item-size"},s.a.createElement("label",null,"Add or update item size list"),s.a.createElement("div",null,s.a.createElement("input",{id:"add-point-input",type:"text",className:"item-size-input",onKeyUp:function(n){return function(n){if(13==n.keyCode){var r=n.currentTarget.value;r&&(e.storyPoints.unshift(r),t(),n.currentTarget.value="")}}(n)}})),e.storyPoints.map((function(n,r){return s.a.createElement("div",{key:r,className:"input-size-div"},s.a.createElement("input",{type:"text",value:n,onChange:function(n){return function(n,r){var a=n.currentTarget.value;e.storyPoints[r]=a,t()}(n,r)},className:"item-size-input"}),s.a.createElement("button",{className:"item-size-btn",onClick:function(){return function(n){e.storyPoints.splice(n,1),t()}(r)}},"X"))})))}));var Q=Object(p.connect)((function(e){return{showVoteSetting:e.AdminSettingReducer.ShowVoteSetting,resetVoteSetting:e.AdminSettingReducer.ResetVoteSetting,editSizeListSetting:e.AdminSettingReducer.EditSizeListSetting,controlUserSetting:e.AdminSettingReducer.ControlUserSetting,sessionId:e.SessionReducer.sessionId,isAdmin:e.SessionReducer.isAdmin}}),(function(e){return{updateShowVoteSetting:function(t){return e(function(e){return{type:"UPDATE_SHOW_VOTE_SETTING",payload:e}}(t))},updateResetVoteSetting:function(t){return e(function(e){return{type:"UPDATE_RESET_VOTE_SETTING",payload:e}}(t))},updateEditSizeListSetting:function(t){return e(function(e){return{type:"UPDATE_EDIT_SIZE_LIST_SETTING",payload:e}}(t))},updateControlUserSetting:function(t){return e(function(e){return{type:"UPDATE_CONTROL_USER_SETTING",payload:e}}(t))},failure:function(t){return e(H(t))}}}))((function(e){Object(c.useEffect)((function(){document.querySelectorAll("#sizing-controls input").forEach((function(t){t.disabled=!e.isAdmin}))}),[]);var t=function(t){var n=t.currentTarget.value;e.updateShowVoteSetting(n)},n=function(t){var n=t.currentTarget.value;e.updateResetVoteSetting(n)},r=function(t){var n=t.currentTarget.value;e.updateEditSizeListSetting(n)},a=function(t){var n=t.currentTarget.value;e.updateControlUserSetting(n)};return s.a.createElement("div",{className:"sizing-controls",id:"sizing-controls"},s.a.createElement("label",null,"Configurations"),s.a.createElement("div",null,s.a.createElement("div",{className:"control-input"},s.a.createElement("label",null,"Who can show votes: "),s.a.createElement("div",null,s.a.createElement("label",null,s.a.createElement("input",{type:"radio",value:"OnlyAdmin",checked:"OnlyAdmin"==e.showVoteSetting,onChange:t}),"Only Admin"),s.a.createElement("label",null,s.a.createElement("input",{type:"radio",value:"All",checked:"All"==e.showVoteSetting,onChange:t}),"All"))),s.a.createElement("hr",null),s.a.createElement("div",{className:"control-input"},s.a.createElement("label",null,"Who can reset votes: "),s.a.createElement("div",null,s.a.createElement("label",null,s.a.createElement("input",{type:"radio",value:"OnlyAdmin",checked:"OnlyAdmin"==e.resetVoteSetting,onChange:n}),"Only Admin"),s.a.createElement("label",null,s.a.createElement("input",{type:"radio",value:"All",checked:"All"==e.resetVoteSetting,onChange:n}),"All"))),s.a.createElement("hr",null),s.a.createElement("div",{className:"control-input"},s.a.createElement("label",null,"Who can modify valid points: "),s.a.createElement("div",null,s.a.createElement("label",null,s.a.createElement("input",{type:"radio",value:"OnlyAdmin",checked:"OnlyAdmin"==e.editSizeListSetting,onChange:r}),"Only Admin"),s.a.createElement("label",null,s.a.createElement("input",{type:"radio",value:"All",checked:"All"==e.editSizeListSetting,onChange:r}),"All"))),s.a.createElement("hr",null),s.a.createElement("div",{className:"control-input"},s.a.createElement("label",null,"Who can remove participants: "),s.a.createElement("div",null,s.a.createElement("label",null,s.a.createElement("input",{type:"radio",value:"OnlyAdmin",checked:"OnlyAdmin"==e.controlUserSetting,onChange:a}),"Only Admin"),s.a.createElement("label",null,s.a.createElement("input",{type:"radio",value:"All",checked:"All"==e.controlUserSetting,onChange:a}),"All"))),s.a.createElement("hr",null)),s.a.createElement("button",{onClick:function(){var t={ShowVoteSetting:e.showVoteSetting,ResetVoteSetting:e.resetVoteSetting,EditSizeListSetting:e.editSizeListSetting,ControlUserSetting:e.controlUserSetting};(function(e,t){var n=W()+"/User/UpdateSettings?teamId="+e;return x.a.post(n,t)})(e.sessionId,t).then((function(e){})).catch((function(t){e.failure("Failed to save the settings. Please try again")}))},id:"save-settings",disabled:!e.isAdmin},"Save"))})),$=function(e){return s.a.createElement("div",{className:"settings"},s.a.createElement(X,null),s.a.createElement(Q,null))},ee=function(e){var t;return s.a.createElement("div",{className:"sizing-results",id:"sizing-results"},s.a.createElement("label",null,"Sizing Results"),(t=function(e,t){var n=1;if(e.length>0){for(var r=[{StoryPoint:e[0][t],count:1}];n<e.length;){var a=Y(r,t,e[n][t]);if(-1==a){var o={StoryPoint:e[n][t],count:1};r.push(o)}else r[a].count++;n++}return r}return[]}(e.users,"StoryPoint"),e.isShowEnabled?s.a.createElement("div",{className:"app-table"},s.a.createElement("div",{className:"app-table-header"},s.a.createElement("div",{className:"app-table-cell"},"Size"),s.a.createElement("div",{className:"app-table-cell"},"No. of votes")),t.map((function(e,t){return s.a.createElement("div",{key:t,className:"app-table-row"},s.a.createElement("div",{className:"app-table-cell"},e.StoryPoint),s.a.createElement("div",{className:"app-table-cell"},e.StoryPoint?e.count:""))}))):s.a.createElement("div",null,"Sizing results will appear here.")))};var te=Object(p.connect)((function(e){return{error:e.WebSocketReducer.error,sessionId:e.SessionReducer.sessionId,isAdmin:e.SessionReducer.isAdmin,storyPoints:e.WebSocketReducer.ValidStoryPoints,storyDescription:e.WebSocketReducer.StoryDescription,PreStoryDescription:e.WebSocketReducer.PreStoryDescription,users:e.WebSocketReducer.Users,isShowEnabled:e.WebSocketReducer.IsShowEnabled}}),(function(e){return{sessionSuccess:function(t){return e(_(t))},sessionFailure:function(t){return e(k(t))},webSocketMessageReceived:function(t){return e(function(e){return{type:"WEB_SOCKET_MESSAGE_RECEIVED",payload:e}}(t))},webSocketIdReceived:function(t){return e(function(e){return{type:"WEB_SOCKET_ID_RECEIVED",payload:e}}(t))},setItemDescription:function(t){return e(function(e){return{type:"SET_ITEM_DESCRIPTION",payload:e}}(t))},updateAdminSettings:function(t){return e(function(e){return{type:"UPDATE_ALL_SETTINGS",payload:e}}(t))},setRole:function(t){return e(function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return{type:"SET_ROLE",payload:e}}(t))},assignWebSocket:function(t){return e(function(e){return{type:"ASSIGN_WEB_SOCKET",payload:e}}(t))}}}))((function(e){var t=new G,n=Object(D.useHistory)();Object(c.useEffect)((function(){V(e.match.params.id).then((function(t){e.sessionSuccess(t.data)})).catch((function(t){console.log(t),n.replace("/"),e.sessionFailure("URL is not found. Please try with different URL.")}))}),[]);var r=Object(c.useState)(""),a=A()(r,2),o=a[0],i=a[1],l=Object(c.useState)(!1),u=A()(l,2),d=u[0],m=u[1];function p(t){var n,r=JSON.parse(t.data);r.SocketId?(e.webSocketIdReceived(r.SocketId),n=r.SocketId,e.isAdmin&&function(e){var t=W()+"/User/SetAdmin?socketId="+e;return x.a.post(t)}(n).then((function(e){})).catch((function(e){console.log(e)}))):(e.webSocketMessageReceived(r),e.updateAdminSettings(r.AdminSettings))}function f(t){e.sessionFailure("You have been disconnencted."),n.replace("/"),e.webSocketMessageReceived(O),e.updateAdminSettings(I)}var E=function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Voter",a=document.getElementById("name-input"),o=a.value;t.startWebSocket(e.sessionId,o,r,p,f),m(!0),"Voter"!==r&&e.setRole(!0),e.assignWebSocket(t.pointingWebSocket),n.replace("/"+e.sessionId+"/size")};return s.a.createElement("div",{className:"size-items"},d?s.a.createElement("div",null,s.a.createElement("div",{className:"size-item-block"},s.a.createElement("div",{className:"item-description"},s.a.createElement("label",{htmlFor:"item-description"},"Item Description:"),s.a.createElement("textarea",{id:"item-description",value:e.storyDescription?e.storyDescription:"",onChange:function(t){e.setItemDescription(t.currentTarget.value)},name:"item-description",placeholder:"Please enter item description",onBlur:function(t){var n,r,a,o=t.currentTarget.value;o!=e.PreStoryDescription&&(n=e.sessionId,r=o,a=W()+"/Pointing/SetItemDescription?teamId="+n+"&itemDescription="+r,x.a.post(a)).then((function(t){e.setItemDescription(o)})).catch((function(t){e.setItemDescription(e.preStoryDescription),console.log(t)}))}})),s.a.createElement("div",null,s.a.createElement("div",{className:"size-item-tabs"},s.a.createElement(D.NavLink,{to:e.match.url+"/Size",activeClassName:"is-active"},"Sizing"),s.a.createElement(D.NavLink,{to:e.match.url+"/Settings",activeClassName:"is-active"},"Settings")),s.a.createElement(D.Route,{exact:!0,path:e.match.path+"/Size",render:function(){return s.a.createElement(Z,null)}}),s.a.createElement(D.Route,{exact:!0,path:e.match.path+"/Settings",render:function(){return s.a.createElement($,null)}}))),s.a.createElement(ee,{users:e.users,isShowEnabled:e.isShowEnabled})):s.a.createElement("div",{className:"join-team-sizing"},"Name:",s.a.createElement("input",{type:"text",id:"name-input",onChange:function(e){i(e.currentTarget.value)}}),s.a.createElement("button",{onClick:function(){return E()},disabled:!o},"Join Team"),s.a.createElement("button",{onClick:function(){return E("Observer")},disabled:!o},"Join as observer")),s.a.createElement(z,{errorText:e.error}))})),ne=n(6);var re=Object(p.connect)((function(e){return{isUserLoggedIn:e.SessionReducer.isUserLoggedIn}}),(function(e){return{openLoginPopup:function(t){return e(U(t))},logout:function(){return e({type:"LOGOUT_USER"})},login:function(t){return e(w(t))}}}))((function(e){var t=Object(D.useHistory)(),n=new ne.Cookies;Object(c.useEffect)((function(){if(n.get("userdetails")){var t=n.get("userdetails");e.login(t)}}),[]);return s.a.createElement("div",null,s.a.createElement("div",{className:"app-tabs"},s.a.createElement("div",{className:"app-header-tab"},s.a.createElement(D.NavLink,{to:"/",exact:!0,activeClassName:"tab-is-active"},"Home"),s.a.createElement(D.NavLink,{to:"/retro/",activeClassName:"tab-is-active"},"Retro"),s.a.createElement(D.NavLink,{to:"/about/",activeClassName:"tab-is-active"},"About")),s.a.createElement("div",{className:"app-header-tab login-tabs"},!e.isUserLoggedIn&&s.a.createElement(D.NavLink,{to:"/register/",activeClassName:"tab-is-active"},"Register"),e.isUserLoggedIn?s.a.createElement("a",{className:"app-login-btn",onClick:function(){n.remove("userdetails"),n.remove("token"),e.logout(),t.replace("/")}},"Logout"):s.a.createElement("a",{className:"app-login-btn",onClick:function(){"undefined"!=typeof window&&-1===window.location.href.indexOf("retro")&&e.openLoginPopup(!0)}},"Login"))))})),ae=x.a.create(),oe=new ne.Cookies;ae.interceptors.request.use((function(e){var t=oe.get("token");return e.headers.authorization=t,e}),(function(e){return Promise.reject(e)}));var ie=ae,le=function(e){var t=ce()+"/Account/SearchUsers?text="+e;return ie.get(t)};function ce(){return j.REACT_APP_BASE_API_URL}var se=Object(p.connect)((function(e){return{}}),(function(e){return{login:function(t){return e(w(t))},openLogin:function(t){return e(U(t))}}}))((function(e){var t=new ne.Cookies,n=Object(D.useHistory)(),r=Object(c.useState)(""),a=A()(r,2),o=a[0],i=a[1];return s.a.createElement("div",null,s.a.createElement("div",{className:"credentials-input"},s.a.createElement("label",null,"Email: "),s.a.createElement("input",{type:"text",placeholder:"Enter your email address",id:"user-email",className:"input-email"})),s.a.createElement("div",{className:"credentials-input"},s.a.createElement("label",null,"Password: "),s.a.createElement("input",{type:"password",placeholder:"Enter your password",id:"user-password",className:"input-password"})),s.a.createElement("div",{style:{marginLeft:"70px"}},s.a.createElement("button",{onClick:function(){var n,r,a=document.getElementById("user-email"),o=document.getElementById("user-password");if(a&&a.value&&o&&o.value){var l=o.value,c=a.value;(n={userEmail:c,password:l},r=ce()+"/Login/Login",ie.post(r,n,{headers:{"content-type":"application/json"}})).then((function(n){t.set("userdetails",JSON.stringify(n.data));var r="Basic "+btoa(c+":"+l);t.set("token",r),e.login(n.data),e.loginCallback&&e.loginCallback(n.data.userId)}),(function(e){i("Failed to login. Please try again")}))}else i("Please enter valid credentials.")}},"Submit"),s.a.createElement("button",{onClick:function(){e.openLogin(!1),n.replace("/register/")}},"Sign up"),e.showCancelButton&&s.a.createElement("button",{onClick:function(){e.openLogin(!1)}},"Cancel")),s.a.createElement(z,{errorText:o}))})),ue=n(9),de=n.n(ue),me=function(e){return s.a.createElement(de.a,{isOpen:e.openLoginPopup,ariaHideApp:!1,overlayClassName:"app-login-modal"},s.a.createElement(se,{showCancelButton:e.showCancelButton,loginCallback:e.loginCallback}))},pe=function(){return s.a.createElement("div",{className:"app-about"},"About this app goes here.")},fe=function(e){var t=Se()+"/retro/GetRetroBoardsOfUser?userId="+e;return ie.get(t)},Ee=function(e){var t=Se()+"/retro/GetRetroColumns?boardId="+e;return ie.get(t)},ve=function(e){var t=Se()+"/retro/GetShareBoards?userId="+e;return ie.get(t)},be=function(e){var t=Se()+"/retro/GetBoardUsers?boardId="+e;return ie.get(t)};function Se(){return j.REACT_APP_BASE_API_URL}var ge=function(e){return{type:"GET_RETRO_DATA",payload:e}},ye=function(e){return{type:"GET_RETRO_BOARDS",payload:e}},Oe=function(e){return{type:"SELECT_BOARD",payload:e}},Re=function(e){return{type:"UPDATE_BOARD_USERS",payload:e}},he=function(e){return{type:"SELECT_RETRO_POINT",payload:e}},Ie=function(e){return{type:"OPEN_CLOSE_RETRO_POINT_MODAL",payload:e}},Pe=function(e){return{type:"GET_RETRO_BOARD_TEMPLATE",payload:e}},Te=(n(39),n(22)),Ce=n.n(Te),Ne=n(15),De=n.n(Ne),Be=n(23),Ae=n.n(Be),_e=n(24),ke=n.n(_e);function we(e){var t=s.a.useState(null),n=A()(t,2),r=n[0],a=n[1];return s.a.createElement("div",{className:"retro-menu"},s.a.createElement(Ae.a,{"aria-label":"settings",onClick:function(e){a(e.currentTarget)},className:"retro-menu-btn"},s.a.createElement(ke.a,null)),s.a.createElement(Ce.a,{id:"simple-menu",anchorEl:r,keepMounted:!0,open:Boolean(r),onClose:function(){return a(null)}},s.a.createElement(De.a,{className:"retro-menu-item",onClick:function(){e.editItem&&e.editItem(),a(null)}},"Edit"),s.a.createElement(De.a,{className:"retro-menu-item",onClick:function(){e.deleteItem&&e.deleteItem(),a(null)}},"Delete"),s.a.createElement(De.a,{className:"retro-menu-item",onClick:function(){e.shareItem&&e.shareItem(),a(null)}},"Share")))}var Ue=n(7),je=n.n(Ue),Le=n(11),xe=n.n(Le),Ve=n(8),We=n.n(Ve),ze=n(12),qe=n.n(ze),Me=function(e){var t=new RegExp("^[a-zA-Z0-9]+.*@[a-zA-Z0-9]+[.][a-zA-Z]+");return!!e&&t.test(e)},Fe=n(13),Ge=n.n(Fe);n(40);function He(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ke(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?He(Object(n),!0).forEach((function(t){E()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):He(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Je=function(e){var t=Object(c.useState)(""),n=A()(t,2),r=n[0],a=n[1],o=s.a.useState(!1),i=A()(o,2),l=i[0],u=i[1],d=s.a.useState([]),m=A()(d,2),p=m[0],f=m[1],E=s.a.useState(""),v=A()(E,2),b=v[0],S=v[1],g=s.a.useState(""),y=A()(g,2),O=y[0],R=y[1];return s.a.useEffect((function(){if(!(b.length<3||b.length>3))return le(b).then((function(e){f(e.data.map((function(e){return e.userEmail})))}),(function(){f([])})),function(){!1}}),[b]),s.a.useEffect((function(){l||f([])}),[l]),s.a.createElement(de.a,{isOpen:e.isShareWithModalOpen,ariaHideApp:!1,overlayClassName:"share-with"},s.a.createElement("div",{className:"share-with-container"},s.a.createElement(We.a,{className:"share-with-close-icon",onClick:function(){e.closeModal(),a("")}}),s.a.createElement(Ge.a,{id:"asynchronous-demo",freeSolo:!0,value:O,style:{width:300,marginTop:13},open:l,onOpen:function(){u(!0)},onClose:function(){u(!1)},onChange:function(e,t){R(t)},onKeyUp:function(e){S(e.target.value)},getOptionLabel:function(e){return e},options:p,renderInput:function(e){return s.a.createElement(je.a,qe()({},e,{label:"Email",variant:"outlined",autoFocus:!0,InputProps:Ke({},e.InputProps)}))}}),s.a.createElement("button",{onClick:function(){var t,n,r,o=O;O||(o=b),o?Me(o.trim())?(t=e.board.boardId,n=o.trim(),r=Se()+"/retro/AddUserToBoard?boardId="+t+"&userEmail="+n,ie.post(r)).then((function(e){R(""),a("Shared successfully.")})):a("Please enter valid email address"):a("Please enter email address")}},"Share")),s.a.createElement(z,{errorText:r}))},Ye=function(e){var t=Object(c.useState)(!1),n=A()(t,2),r=n[0],a=n[1],o=Object(c.useState)(!1),i=A()(o,2),l=i[0],u=i[1];return s.a.createElement("div",{className:"board"},e.showInput||r?s.a.createElement("div",null,s.a.createElement(je.a,{multiline:!0,defaultValue:e.board.boardTitle,variant:"outlined",className:"board-input",autoFocus:!0,id:"retro-board-input"}),s.a.createElement("div",{className:"board-icon"},s.a.createElement(xe.a,{onClick:function(){var t=document.getElementById("retro-board-input");t.value&&(e.board.boardId?(e.board.boardTitle=t.value,e.updateBoard&&e.updateBoard()):e.createBoard(t.value),a(!1))}}),s.a.createElement(We.a,{onClick:function(){e.cancelCreate&&e.cancelCreate(),a(!1)}}))):s.a.createElement(D.NavLink,{to:"/retro/"+e.board.boardId,activeClassName:"is-active"},s.a.createElement("div",{onClick:e.selectBoard,className:"retro-board-title"},e.board.boardTitle)),!e.showInput&&s.a.createElement("div",{className:"retro-board-menu"},s.a.createElement(we,{editItem:function(){return a(!0)},deleteItem:function(){return e.deleteBoard()},shareItem:function(){return u(!0)}})),s.a.createElement(Je,{isShareWithModalOpen:l,closeModal:function(){return u(!1)},board:e.board}))},Ze=n(25),Xe=n.n(Ze),Qe=n(26),$e=n.n(Qe),et=n(27),tt=n.n(et);var nt=Object(p.connect)((function(e){return{retroBoards:e.RetroReducer.retroBoards,userDetails:e.SessionReducer.userDetails,selectedBoard:e.RetroReducer.selectedBoard,selectedBoardIdFromURL:e.RetroReducer.selectedBoardId}}),(function(e){return{getRetroData:function(t){return e(ge(t))},getRetroBoards:function(t){return e(ye(t))},selectRetroBoard:function(t){return e(Oe(t))},setError:function(t){return e(k(t))},updateBoardUsers:function(t){return e(Re(t))}}}))((function(e){var t=Object(D.useHistory)(),n=Object(c.useState)(!1),r=A()(n,2),a=r[0],o=r[1],i=Object(c.useState)(!1),l=A()(i,2),u=l[0],d=l[1];Object(c.useEffect)((function(){if(e.selectedBoardIdFromURL){var n=Y(e.retroBoards,"boardId",new Number(e.selectedBoardIdFromURL).valueOf());-1!==n?m(e.retroBoards[n]):t.replace("/retro/")}}),[e.retroBoards.length]);var m=function(t){e.selectRetroBoard(t),be(t.boardId).then((function(t){e.updateBoardUsers(t.data)})),Ee(t.boardId).then((function(t){e.getRetroData(t.data),e.setError("")}),(function(t){e.setError("Failed to fetch board details."),console.log(t)}))},p=function(t){(function(e){var t=Se()+"/retro/UpdateRetroBoard";return ie.post(t,e)})(t).then((function(){e.getRetroBoards(e.retroBoards)}))},f=function(t){(function(e,t){var n=Se()+"/retro/DeleteRetroBoard?boardId="+e;return ie.delete(n,{data:new Number(t)})})(t,e.userDetails.userId).then((function(){e.setError(""),J(e.retroBoards,"boardId",t);var n=e.retroBoards.slice();e.getRetroBoards(n),t===e.selectedBoard.boardId&&e.selectRetroBoard({})}),(function(){e.setError("Failed to delete the board.")}))};return s.a.createElement("div",{className:"retro-board-container",id:"retro-board-container"},s.a.createElement("div",null,u?s.a.createElement($e.a,{className:"expand-collapse-icon",onClick:function(){document.getElementById("retro-board-container").style.width="26%",document.getElementById("settings-icon").style.float="right",d(!1)}}):s.a.createElement(Xe.a,{className:"expand-collapse-icon",onClick:function(){document.getElementById("retro-board-container").style.width="auto",document.getElementById("settings-icon").style.float="none",d(!0)}}),s.a.createElement(D.NavLink,{to:"/retro/settings",id:"settings-icon",className:"settings-icon"},s.a.createElement("div",null,s.a.createElement(tt.a,null)))),!u&&s.a.createElement("div",{className:"retro-boards"},a?s.a.createElement(Ye,{showInput:!0,board:{},createBoard:function(t){if(t){var n={boardTitle:t,boardOwnerId:e.userDetails.userId,creationDate:(new Date).toDateString()};(function(e){var t=Se()+"/retro/AddRetroBoard";return ie.post(t,e)})(n).then((function(t){n.boardId=t.data,e.retroBoards||(e.retroBoards=[]),e.retroBoards.push(n),e.getRetroBoards(e.retroBoards),o(!1),e.setError("")}),(function(t){console.log(t),e.setError("Failed to add retro board. Please try later.")}))}},cancelCreate:function(){o(!1)}}):s.a.createElement("button",{onClick:function(){return o(!0)}},"Create board"),s.a.createElement("label",{className:"retro-board-heading"},"My boards"),e.retroBoards.map((function(t,n){if(e.userDetails.userId===t.boardOwnerId)return s.a.createElement(Ye,{key:n,board:t,selectBoard:function(){return m(t)},updateBoard:function(){return p(t)},deleteBoard:function(){return f(t.boardId)}})})),s.a.createElement("label",{className:"retro-board-heading"},"Shared boards"),e.retroBoards.map((function(t,n){if(e.userDetails.userId!==t.boardOwnerId)return s.a.createElement(Ye,{key:n,board:t,selectBoard:function(){return m(t)},updateBoard:function(){return p(t)},deleteBoard:function(){return f(t.boardId)}})}))))})),rt=n(28),at=n(29),ot=n.n(at),it=n(30),lt=n.n(it),ct=n(31),st=n.n(ct),ut=n(32),dt=n.n(ut),mt=n(14),pt=n.n(mt),ft=n(33),Et=n.n(ft),vt=Object(rt.makeStyles)({root:{marginLeft:"13px",marginTop:"6.5px"},bullet:{display:"inline-block",margin:"0 2px",transform:"scale(0.8)"},title:{fontSize:14},pos:{marginBottom:12}}),bt=function(e){var t=vt(),n=Object(c.useState)(!1),r=A()(n,2),a=r[0],o=r[1];Object(c.useEffect)((function(){e.cardDetails.retroPointId||o(!0)}),[]);return s.a.createElement(ot.a,{className:t.root},s.a.createElement(lt.a,null,a&&s.a.createElement(je.a,{multiline:!0,defaultValue:e.cardDetails.retroPointText,variant:"outlined",autoFocus:!0,id:"retro-point-input"}),s.a.createElement(st.a,{variant:"body2",component:"p",onClick:e.selectRetroPoint},!a&&e.cardDetails.retroPointText)),s.a.createElement(Et.a,null,a&&s.a.createElement(xe.a,{className:"retro-point-icon",onClick:e.cardDetails.retroPointId?function(){var t,n,r=document.getElementById("retro-point-input");r.value&&(e.cardDetails.retroPointText=r.value,e.cardDetails.retroBoardId=e.boardId,(t=e.cardDetails,n=Se()+"/retro/UpdateRetroPoint",ie.put(n,t)).then((function(){e.updateCard(),o(!1)})))}:function(){var t,n,r=document.getElementById("retro-point-input");r.value&&(e.cardDetails.retroPointText=r.value,e.cardDetails.creationDate=(new Date).toDateString(),e.cardDetails.retroBoardId=e.boardId,(t=e.cardDetails,n=Se()+"/retro/AddRetroPoint",ie.post(n,t)).then((function(t){e.cardDetails.retroPointId=t.data,e.addCard(e.cardDetails)})))}}),a&&s.a.createElement(We.a,{className:"retro-point-icon",onClick:function(){e.cancelAdd&&e.cancelAdd(),o(!1)}}),!a&&e.cardDetails.retroPointId&&s.a.createElement(dt.a,{className:"retro-point-icon",onClick:function(){return o(!0)}}),e.cardDetails.retroPointId&&s.a.createElement(pt.a,{className:"retro-point-icon",onClick:function(){var t,n;e.cardDetails.retroBoardId=e.boardId,(t=e.cardDetails,n=Se()+"/retro/DeleteRetroPoint",ie.delete(n,{data:t})).then((function(){e.deleteCard(e.cardDetails),o(!1)}))}}),s.a.createElement("div",{className:"retro-point-date"},e.cardDetails.creationDate)))},St=n(34),gt=n.n(St);var yt=Object(p.connect)((function(e){return{retroData:e.RetroReducer.retroData,selectedBoard:e.RetroReducer.selectedBoard,userDetails:e.SessionReducer.userDetails}}),(function(e){return{updateRetroData:function(t){return e(ge(t))},selectRetroPoint:function(t){return e(he(t))},openCloseModal:function(t){return e(Ie(t))}}}))((function(e){var t=Object(c.useState)(!0),n=A()(t,2),r=n[0],a=n[1],o=Object(c.useState)(!1),i=A()(o,2),l=i[0],u=i[1],d={retroPointUserId:e.userDetails.userId,retroPointText:"",creationDate:"",retroColumnId:e.columnId},m=function(t,n){if("Enter"===t.key)if(t.target.value)if(t.persist(),n){var r=Y(e.retroData,"columnId",n),a=e.retroData[r];a.columnTitle=t.target.value,function(e){var t=Se()+"/retro/UpdateRetroColumn";return ie.put(t,e)}(a).then((function(e){p(),t.target.blur()}),(function(e){console.log(e)}))}else{var o={columnTitle:t.target.value,creationDate:(new Date).toDateString(),retroBoardId:e.selectedBoard.boardId,RetroPoints:[]};e.retroData.push(o),function(e){var t=Se()+"/retro/AddRetroColumn";return ie.post(t,e)}(o).then((function(e){o.columnId=e.data,p()}),(function(e){console.log(e)})),t.target.value=""}else n&&-1!==(r=Y(e.retroData,"columnId",n))&&function(e){var t=Se()+"/retro/DeleteRetroColumn";return ie.delete(t,{data:e})}(e.retroData[r]).then((function(e){p()}))},p=function(){var t=e.retroData.slice();e.updateRetroData(t)},f=function(t){J(e.columnDetails.retroPoints,"retroPointId",t.retroPointId),p()};return s.a.createElement("div",{className:"retroTopicContainer"},s.a.createElement("div",{className:"retroColumnHeader"},e.columnTitle&&!l?s.a.createElement("label",{className:"retroColumnHeaderLabel",onClick:function(){u(!0)}},e.columnTitle):s.a.createElement("input",{type:"text",className:"retroColumnHeaderInput",defaultValue:e.columnTitle,placeholder:e.placeholder||"Click to add retro column",autoFocus:!0,onBlur:function(){u(!1)},onKeyPress:function(t){return m(t,e.columnId)}})),e.columnDetails&&e.columnDetails.retroPoints&&e.columnDetails.retroPoints.map((function(t){return s.a.createElement(bt,{key:t.retroPointId,boardId:e.selectedBoard.boardId,cardDetails:t,deleteCard:f,updateCard:p,selectRetroPoint:function(){e.selectRetroPoint(t),e.openCloseModal(!0)}})})),r&&e.columnDetails&&s.a.createElement("div",{title:"Click to add point",className:"addCardButton",onClick:function(){a(!1)}},s.a.createElement(gt.a,null)),!r&&s.a.createElement(bt,{boardId:e.selectedBoard.boardId,cardDetails:d,addCard:function(t){e.columnDetails.retroPoints||(e.columnDetails.retroPoints=[]),e.columnDetails.retroPoints.push(t);var n=Y(e.retroData,"columnId",e.columnDetails.columnId);e.retroData[n]=e.columnDetails,p(),a(!0)},cancelAdd:function(){a(!0)}}))})),Ot=n(35),Rt=n.n(Ot),ht=function(e){var t=Object(c.useState)(!1),n=A()(t,2),r=n[0],a=n[1];return s.a.createElement("div",{className:"retro-point-comment",key:e.comment.commentId},s.a.createElement("div",{className:"retro-point-comment-text"},r?s.a.createElement("textarea",{className:"retro-point-comment-input retro-point-comment-update",defaultValue:e.comment.commentText,autoFocus:!0,onKeyDown:function(t){"Enter"===t.key&&(t.preventDefault(),t.target.value?(e.comment.commentText=t.target.value,e.updateComment&&e.updateComment(e.comment)):e.deleteComment&&e.deleteComment(e.comment),a(!1))},onBlur:function(){return a(!1)}}):s.a.createElement("label",{onClick:function(){return a(!0)}},e.comment.commentText)),s.a.createElement("div",{className:"retro-point-comment-owner"},s.a.createElement("label",null,e.comment.commentOwnerEmail),s.a.createElement("label",{className:"retro-point-comment-date"},e.comment.creationDate)))};var It=Object(p.connect)((function(e){return{isRetroPointModalOpen:e.RetroReducer.isRetroPointModalOpen,selectedRetroPoint:e.RetroReducer.selectedRetroPoint,userDetails:e.SessionReducer.userDetails,selectedBoard:e.RetroReducer.selectedBoard}}),(function(e){return{openCloseModal:function(t){return e(Ie(t))},selectRetroPoint:function(t){return e(he(t))},updateRetroData:function(t){return e(ge(t))}}}))((function(e){var t=function(t){t.retroBoardId=e.selectedBoard.boardId,function(e){var t=Se()+"/retro/UpdateRetroPointComment";return ie.put(t,e)}(t).then((function(n){var r=Y(e.selectedRetroPoint.retroComments,"commentId",t.commentId);if(-1!==r){e.selectedRetroPoint.retroComments[r]=t;var a=JSON.parse(JSON.stringify(e.selectedRetroPoint));e.selectRetroPoint(a)}}))},n=function(t){t.retroBoardId=e.selectedBoard.boardId,function(e){var t=Se()+"/retro/DeleteRetroPointComment";return ie.delete(t,{data:e})}(t).then((function(n){J(e.selectedRetroPoint.retroComments,"commentId",t.commentId);var r=JSON.parse(JSON.stringify(e.selectedRetroPoint));e.selectRetroPoint(r)}))};return s.a.createElement("div",{className:"retro-point-details"},s.a.createElement(de.a,{isOpen:e.isRetroPointModalOpen,overlayClassName:"retro-point-details-modal",onRequestClose:function(){return e.openCloseModal(!1)},ariaHideApp:!1},s.a.createElement("div",null,s.a.createElement(We.a,{className:"retro-detail-close-icon",onClick:function(){return e.openCloseModal(!1)}}),s.a.createElement("div",{className:"retro-details-title"},e.selectedRetroPoint.retroPointText),s.a.createElement("div",{className:"retro-details-text"},s.a.createElement("b",null,"Created on:")," ",e.selectedRetroPoint.creationDate),s.a.createElement("div",{className:"retro-details-text"},s.a.createElement("b",null,"Created by:")," ",e.selectedRetroPoint.retroPointOwnerEmail),s.a.createElement("div",null,s.a.createElement("label",{className:"retro-details-text"},s.a.createElement("b",null,"Comments:")),e.selectedRetroPoint.retroComments&&e.selectedRetroPoint.retroComments.map((function(e,r){return s.a.createElement(ht,{comment:e,updateComment:t,deleteComment:n,key:e.commentId})})),s.a.createElement("textarea",{id:"retro-point-comment",className:"retro-point-comment-input",placeholder:"Enter your comment and press ENTER",onKeyDown:function(t){"Enter"===t.key&&(t.preventDefault(),t.target&&t.target.value&&function(e){var t=Se()+"/retro/AddRetroPointComment";return ie.post(t,e)}({commentOwnerId:e.userDetails.userId,retroPointId:e.selectedRetroPoint.retroPointId,retroColumnId:e.selectedRetroPoint.retroColumnId,commentText:t.target.value,retroBoardId:e.selectedBoard.boardId}).then((function(t){e.selectedRetroPoint.retroComments||(e.selectedRetroPoint.retroComments=[]),e.selectedRetroPoint.retroComments.push(t.data);var n=JSON.parse(JSON.stringify(e.selectedRetroPoint));e.selectRetroPoint(n);var r=document.getElementById("retro-point-comment");r&&(r.value="")})))}})))))}));var Pt=Object(p.connect)((function(e){return{retroData:e.RetroReducer.retroData,selectedBoard:e.RetroReducer.selectedBoard,boardIdFromURL:e.RetroReducer.selectedBoardId,boardUsers:e.RetroReducer.selectedBoardUsers}}),(function(e){return{getRetroData:function(t){return e(ge(t))},selectBoardIdFromURL:function(t){return e(function(e){return{type:"LOAD_BOARD_ID_FROM_URL",payload:e}}(t))},selectBoard:function(t){return e(Oe(t))}}}))((function(e){Object(c.useEffect)((function(){e.match.params.id?e.selectBoardIdFromURL(e.match.params.id):(e.selectBoardIdFromURL(""),e.selectBoard({}))}),[]);var t=Object(c.useState)(!1),n=A()(t,2),r=n[0],a=n[1];return e.selectedBoard&&e.selectedBoard.boardId?s.a.createElement("div",{className:"retro-detail-container"},s.a.createElement("div",{className:"selected-board-title"},s.a.createElement("label",null,e.selectedBoard.boardTitle),s.a.createElement("div",{className:"board-users"},s.a.createElement(Rt.a,{className:"retro-board-share-icon",onClick:function(){a(!0)}}),e.boardUsers.map((function(e){return s.a.createElement("p",{key:e.userId,title:e.userEmail},e.userEmail.substring(0,1))})))),s.a.createElement(Je,{isShareWithModalOpen:r,closeModal:function(){return a(!1)},board:e.selectedBoard}),s.a.createElement("div",{className:"board-content"},e.retroData&&e.retroData.map((function(e){return s.a.createElement(yt,{key:e.columnId,columnTitle:e.columnTitle,columnId:e.columnId,columnDetails:e})})),s.a.createElement(yt,null)),s.a.createElement(It,null)):s.a.createElement("div",{className:"select-retro-board"},"Please select a board from left pane.")}));var Tt=Object(p.connect)((function(e){return{selectedBoard:e.RetroReducer.selectedBoard,selectedRetroPoint:e.RetroReducer.selectedRetroPoint}}),(function(e){return{getRetroBoards:function(t){return e(ye(t))},getRetroData:function(t){return e(ge(t))},updateBoardUsers:function(t){return e(Re(t))},updateSelectedRetroPoint:function(t){return e(he(t))},openClosePointModal:function(t){return e(Ie(t))}}}))((function(e){var t,n=Object(c.useRef)(e.selectedBoard),r=Object(c.useRef)(e.selectedRetroPoint);Object(c.useEffect)((function(){e.userId&&a(e.userId)}),[]),Object(c.useEffect)((function(){r.current=e.selectedRetroPoint}),[e.selectedRetroPoint]),Object(c.useEffect)((function(){n.current=e.selectedBoard}),[e.selectedBoard]);var a=function(e){var n=j.REACT_APP_RETRO_SOCKET_URL+"?userId="+e;t||((t=new WebSocket(n)).onmessage=o,t.onclose=i)},o=function(t){var a,o=JSON.parse(t.data);switch(o.action){case"BoardAdded":case"BoardUpdated":l(e.userId);break;case"BoardDetailsUpdated":(a=o.boardid)===n.current.boardId&&Ee(a).then((function(t){e.getRetroData(t.data),function(t){if(t){for(var n=0;n<t.length;n++)if(t[n].columnId===r.current.retroColumnId){var a=t[n].retroPoints;if(a)for(var o=0;o<a.length;o++)if(a[o].retroPointId===r.current.retroPointId)return void e.updateSelectedRetroPoint(a[o])}e.updateSelectedRetroPoint({}),e.openClosePointModal(!1)}}(t.data)}));break;case"BoardUserAdded":!function(t){t===n.current.boardId&&be(t).then((function(t){e.updateBoardUsers(t.data)}))}(o.boardid)}},i=function(e){};function l(t){var n=[];fe(t).then((function(t){n=n.concat(t.data),e.getRetroBoards(n)})),ve(t).then((function(t){n=n.concat(t.data),e.getRetroBoards(n)}))}return s.a.createElement("div",null)})),Ct=function(e){return s.a.createElement("div",{className:"retro-template-user"},s.a.createElement("div",null,e.templateUser&&s.a.createElement("div",null,s.a.createElement(pt.a,{style:{cursor:"pointer"},onClick:function(){return e.delete&&e.delete(e.templateUser)}}),s.a.createElement("label",{className:"retro-template-user-email"},e.templateUser.userEmail))))},Nt=function(e){var t=Object(c.useState)(!1),n=A()(t,2),r=n[0],a=n[1];return s.a.createElement("div",{className:"retro-template-column"},r||!e.templateColumn?s.a.createElement("div",null,s.a.createElement("input",{type:"text",autoFocus:!0,onKeyUp:function(t){if("Enter"===t.key){if(t.target.value){if(e.templateColumn&&e.templateColumn.retroTemplateColumnId)e.templateColumn.retroTemplateColumnName=t.target.value,e.update&&e.update(e.templateColumn);else{var n={retroTemplateColumnName:t.target.value};e.add&&e.add(n)}t.target.value=""}else e.delete&&e.delete(e.templateColumn);a(!1)}},placeholder:"Type name and press ENTER",className:"retro-template-column-input",onBlur:function(){return a(!1)},defaultValue:e.templateColumn&&e.templateColumn.retroTemplateColumnName})):e.templateColumn&&s.a.createElement("label",{onClick:function(){a(!0)}},e.templateColumn.retroTemplateColumnName))},Dt=n(36),Bt=n.n(Dt),At=n(37),_t=n.n(At);function kt(){return j.REACT_APP_BASE_API_URL}function wt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ut(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wt(Object(n),!0).forEach((function(t){E()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var jt=Object(p.connect)((function(e){return{templates:e.RetroReducer.retroBoardTemplates}}),(function(e){return{updateBoardTemplates:function(t){return e(Pe(t))}}}))((function(e){var t=s.a.useState(!1),n=A()(t,2),r=n[0],a=n[1],o=s.a.useState([]),i=A()(o,2),l=i[0],u=i[1],d=s.a.useState(""),m=A()(d,2),p=m[0],f=m[1],E=s.a.useState(""),v=A()(E,2),b=v[0],S=v[1];s.a.useEffect((function(){if(!(p.length<3||p.length>3))return le(p).then((function(e){u(e.data.map((function(e){return e.userEmail})))}),(function(){u([])})),function(){!1}}),[p]),s.a.useEffect((function(){r||u([])}),[r]);var g=Object(c.useState)(!1),y=A()(g,2),O=y[0],R=y[1],h=Object(c.useState)(!1),I=A()(h,2),P=I[0],T=I[1],C=function(t){var n,r;t.retroBoardTemplateId=e.template.retroBoardTemplateId,(n=t,r=kt()+"/RetroSettings/AddRetroBoardTemplateColumn",ie.post(r,n)).then((function(n){var r=Y(e.templates,"retroBoardTemplateId",t.retroBoardTemplateId);if(-1!==r){e.templates[r].templateColumns||(e.templates[r].templateColumns=[]),e.templates[r].templateColumns.push(n.data);var a=e.templates.slice();e.updateBoardTemplates(a)}}))},N=function(t){var n,r;(n=t,r=kt()+"/RetroSettings/UpdateRetroBoardTemplateColumn",ie.put(r,n)).then((function(n){var r=Y(e.templates,"retroBoardTemplateId",t.retroBoardTemplateId);if(-1!==r){var a=Y(e.templates[r].templateColumns,"retroTemplateColumnId",t.retroTemplateColumnId);-1!==a&&(e.templates[r].templateColumns[a]=t);var o=e.templates.slice();e.updateBoardTemplates(o)}}))},D=function(t){var n,r;(n=t,r=kt()+"/RetroSettings/DeleteRetroBoardTemplateColumn",ie.delete(r,{data:n})).then((function(n){var r=Y(e.templates,"retroBoardTemplateId",t.retroBoardTemplateId);if(-1!==r){J(e.templates[r].templateColumns,"retroTemplateColumnId",t.retroTemplateColumnId);var a=e.templates.slice();e.updateBoardTemplates(a)}}))},B=function(t){var n,r;"Enter"===t.key&&Me(b)&&(n={userEmail:b,retroBoardTemplateId:e.template.retroBoardTemplateId},r=kt()+"/RetroSettings/AddRetroBoardTemplateUser",ie.post(r,n)).then((function(t){var n=Y(e.templates,"retroBoardTemplateId",e.template.retroBoardTemplateId);if(-1!==n){e.templates[n].templateUsers||(e.templates[n].templateUsers=[]),e.templates[n].templateUsers.push(t.data);var r=e.templates.slice();e.updateBoardTemplates(r)}f(""),S("")}))},_=function(t){var n,r;(n=t,r=kt()+"/RetroSettings/DeleteRetroBoardTemplateUser",ie.delete(r,{data:n})).then((function(){var n=Y(e.templates,"retroBoardTemplateId",e.template.retroBoardTemplateId);if(-1!==n){J(e.templates[n].templateUsers,"id",t.id);var r=e.templates.slice();e.updateBoardTemplates(r)}}))};return s.a.createElement("div",{className:"retro-template"},e.template&&s.a.createElement("div",null,s.a.createElement("div",{className:"retro-template-header"},O?s.a.createElement("input",{type:"text",autoFocus:!0,defaultValue:e.template.templateName,onKeyUp:function(t){var n,r;"Enter"===t.key&&(t.target.value?(e.template.templateName=t.target.value,(n=e.template,r=kt()+"/RetroSettings/UpdateRetroBoardTemplateName",ie.put(r,n)).then((function(){var t=Y(e.templates,"retroBoardTemplateId",e.template.retroBoardTemplateId);if(R(!1),-1!==t){e.templates[t]=e.template;var n=e.templates.slice();e.updateBoardTemplates(n)}}))):function(e){var t=kt()+"/RetroSettings/DeleteRetroBoardTemplate";return ie.delete(t,{data:e})}(e.template).then((function(){J(e.templates,"retroBoardTemplateId",e.template.retroBoardTemplateId);var t=e.templates.slice();e.updateBoardTemplates(t)})))},onBlur:function(){return R(!1)}}):s.a.createElement("label",{onClick:function(){return R(!0)}},e.template.templateName,e.template.isDefault?s.a.createElement("b",null," (Default)"):""),s.a.createElement("div",{className:"retro-template-icon"},P?s.a.createElement(_t.a,{onClick:function(){return T(!1)}}):s.a.createElement(Bt.a,{onClick:function(){return T(!0)}})),s.a.createElement("div",{className:"retro-template-actions"},s.a.createElement("label",{onClick:function(t){var n,r;(n=e.template,r=kt()+"/RetroSettings/SetDefaultTemplate",ie.post(r,n)).then((function(){e.templates.forEach((function(e){e.isDefault=!1}));var t=Y(e.templates,"retroBoardTemplateId",e.template.retroBoardTemplateId);if(R(!1),-1!==t){e.templates[t].isDefault=!0;var n=e.templates.slice();e.updateBoardTemplates(n)}}))}},"Set as default"))),P&&s.a.createElement("div",{className:"retro-template-content"},s.a.createElement("b",null,"Columns:"),e.template.templateColumns&&e.template.templateColumns.map((function(e){return s.a.createElement(Nt,{key:e.retroTemplateColumnId,add:C,update:N,delete:D,templateColumn:e})})),s.a.createElement(Nt,{add:C,update:N,delete:D}),s.a.createElement("hr",null),s.a.createElement("b",null,"Users:"),e.template.templateUsers&&e.template.templateUsers.map((function(e){return s.a.createElement(Ct,{key:e.id,templateUser:e,delete:_})})),s.a.createElement(Ge.a,{id:"asynchronous-demo",freeSolo:!0,value:b,style:{width:300,marginTop:13},open:r,className:"retro-template-user-input",onOpen:function(){a(!0)},onClose:function(){a(!1)},onChange:function(e,t){S(t)},onKeyUp:function(e){f(e.target.value)},getOptionLabel:function(e){return e},options:l,renderInput:function(e){return s.a.createElement(je.a,qe()({},e,{label:"Email",variant:"outlined",onKeyUp:B,InputProps:Ut({},e.InputProps)}))}}))))}));var Lt=Object(p.connect)((function(e){return{templates:e.RetroReducer.retroBoardTemplates,userDetails:e.SessionReducer.userDetails}}),(function(e){return{updateBoardTemplates:function(t){return e(Pe(t))}}}))((function(e){var t=Object(c.useState)(!1),n=A()(t,2),r=n[0],a=n[1];Object(c.useEffect)((function(){var t,n;(t=e.userDetails.userId,n=kt()+"/RetroSettings/GetRetroBoardTemplates?userId="+t,ie.get(n)).then((function(t){e.updateBoardTemplates(t.data)}))}),[]);return s.a.createElement("div",{className:"retro-settings"},s.a.createElement("div",null,s.a.createElement("div",{className:"retro-settings-heading"},s.a.createElement("label",null,"Default Retro Board Template")),s.a.createElement("hr",null),s.a.createElement("div",null,r?s.a.createElement("div",null,s.a.createElement("input",{type:"text",placeholder:"Type name and press ENTER",autoFocus:!0,onKeyDown:function(t){"Enter"===t.key&&(t.target.value&&function(e){var t=kt()+"/RetroSettings/AddRetroBoardTemplate";return ie.post(t,e)}({templateName:t.target.value,templateOwnerId:e.userDetails.userId}).then((function(t){e.templates.push(t.data);var n=e.templates.slice();e.updateBoardTemplates(n),a(!1)})))}}),s.a.createElement("button",{onClick:function(){return a(!1)}},"Cancel")):s.a.createElement("button",{onClick:function(){return a(!0)}},"Create Template")),s.a.createElement("div",null,e.templates&&e.templates.map((function(e){return s.a.createElement(jt,{key:e.retroBoardTemplateId,template:e})})))))}));var xt=Object(p.connect)((function(e){return{isUserLoggedIn:e.SessionReducer.isUserLoggedIn,userDetails:e.SessionReducer.userDetails,error:e.SessionReducer.sessionError,retroBoards:e.RetroReducer.retroBoards}}),(function(e){return{getRetroBoards:function(t){return e(ye(t))},openLoginPopup:function(t){return e(U(t))},setError:function(t){return e(k(t))}}}))((function(e){Object(c.useEffect)((function(){e.openLoginPopup(!1),e.setError(""),e.isUserLoggedIn&&t(e.userDetails.userId)}),[e.isUserLoggedIn]);var t=function(t){var n=[];fe(t).then((function(t){n=n.concat(t.data),e.getRetroBoards(n)}),(function(e){console.log(e)})),ve(t).then((function(t){n=n.concat(t.data),e.getRetroBoards(n)}))};return e.isUserLoggedIn?s.a.createElement("div",null,s.a.createElement(Tt,{userId:e.userDetails.userId}),s.a.createElement("div",{className:"retro"},s.a.createElement(nt,null),s.a.createElement(D.Route,{path:"/retro/settings/",render:function(e){return s.a.createElement(Lt,e)}}),s.a.createElement(D.Route,{path:["/retro/:id(\\d+)","/retro/"],exact:!0,render:function(e){return s.a.createElement(Pt,e)}})),s.a.createElement("div",{style:{textAlign:"center"}},s.a.createElement(z,{errorText:e.error}))):s.a.createElement(me,{openLoginPopup:!e.isUserLoggedIn,loginCallback:function(){}})}));var Vt=Object(p.connect)((function(e){return{isUserLoggedIn:e.SessionReducer.isUserLoggedIn}}),(function(e){return{loginUser:function(t){return e(w(t))}}}))((function(e){var t=new ne.Cookies,n=Object(D.useHistory)();Object(c.useEffect)((function(){e.isUserLoggedIn&&n.replace("/")}),[e.isUserLoggedIn]);var r=Object(c.useState)(""),a=A()(r,2),o=a[0],i=a[1];return s.a.createElement("div",{className:"registration"},s.a.createElement("div",{className:"app-table"},s.a.createElement("div",{className:"app-table-row"},s.a.createElement("div",{className:"app-table-cell registration-labels"},s.a.createElement("label",null,"Name:")),s.a.createElement("div",{className:"app-table-cell"},s.a.createElement("input",{type:"text",id:"registration-user-name"}))),s.a.createElement("div",{className:"app-table-row"},s.a.createElement("div",{className:"app-table-cell registration-labels"},s.a.createElement("label",null,"Phone:")),s.a.createElement("div",{className:"app-table-cell"},s.a.createElement("input",{type:"text",id:"registration-user-phone"}))),s.a.createElement("div",{className:"app-table-row"},s.a.createElement("div",{className:"app-table-cell registration-labels"},s.a.createElement("label",null,"Email:")),s.a.createElement("div",{className:"app-table-cell"},s.a.createElement("input",{type:"text",id:"registration-user-email"}))),s.a.createElement("div",{className:"app-table-row"},s.a.createElement("div",{className:"app-table-cell registration-labels"},s.a.createElement("label",null,"Password:")),s.a.createElement("div",{className:"app-table-cell"},s.a.createElement("input",{type:"password",id:"registration-user-password",className:"input-password"}))),s.a.createElement("div",{className:"app-table-row"},s.a.createElement("div",{className:"app-table-cell"}),s.a.createElement("div",{className:"app-table-cell"},s.a.createElement("button",{onClick:function(){var n,r,a=function(){var e=document.getElementById("registration-user-password");if(!e||e&&!e.value||e.value.length<8)return void i("Please enter valid password atleast 8 characters long.");return e.value}(),o=function(){var e=document.getElementById("registration-user-email");if(!e||e&&!e.value||!Me(e.value))return void i("Please enter valid email.");return e.value}(),l=function(){var e=document.getElementById("registration-user-phone");if(e)return e.value;return}(),c=function(){var e=document.getElementById("registration-user-name");if(!e||e&&!e.value)return void i("Please enter name.");return e.value}();c&&o&&a&&l&&(i(""),(n={Name:c,UserEmail:o,Phone:l,Password:a},r=ce()+"/Login/RegisterUser",ie.post(r,n)).then((function(n){e.loginUser(n.data),t.set("userdetails",JSON.stringify(n.data));var r="Basic "+btoa(o+":"+a);t.set("token",r)}),(function(){i("Failed to register user. Please try again.")})))}},"Submit"),s.a.createElement("button",{onClick:function(){var e=document.getElementById("registration-user-name"),t=document.getElementById("registration-user-email"),n=document.getElementById("registration-user-password");e&&(e.value=""),t&&(t.value=""),n&&(n.value=""),i("")}},"Reset form")))),s.a.createElement(z,{errorText:o}))}));var Wt=Object(p.connect)((function(e){return{openLoginPopup:e.SessionReducer.openLoginPopup}}),null)((function(e){return s.a.createElement(s.a.Fragment,null,s.a.createElement(me,{openLoginPopup:e.openLoginPopup,showCancelButton:!0}),s.a.createElement(re,null),s.a.createElement(D.Switch,null,s.a.createElement(D.Route,{exact:!0,path:"/",component:q}),s.a.createElement(D.Route,{path:"/about",component:pe}),s.a.createElement(D.Route,{path:"/retro",component:xt}),s.a.createElement(D.Route,{path:"/register",component:Vt}),s.a.createElement(D.Route,{path:"/:id",component:te})))}));var zt=function(){return s.a.createElement("div",null,s.a.createElement(Wt,null))},qt=l();qt.use(l.static("server-build/public")),qt.get("*",function(){var e=i()(a.a.mark((function e(t,n){var r,o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=Object(m.createStore)(N),o=d.a.renderToString(s.a.createElement(p.Provider,{store:r},s.a.createElement(D.StaticRouter,{location:t.url,context:{}},s.a.createElement(zt,null)))),i=r.getState(),n.send('<!doctype html>\n      <head>\n      <link rel="stylesheet" href="'.concat("/style.css",'"></style/>\n      </head>\n      <body>\n      <div id="root">').concat(o,"</div>\n      <script>\n        window.__PRELOADED_STATE__= ").concat(JSON.stringify(i).replace(/</g,"\\u003c"),'\n        <\/script>\n        <script type="text/javascript" src="').concat("/client_bundle.js",'" defer><\/script> \n      </body>\n    '));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),qt.listen(3030,(function(){return console.log("Listening on localhost:3030")}))}]);